{"version":3,"sources":["hooks/useAudioPlayer.js","components/AudioPlayer/Bar.jsx","components/AudioPlayer/Play.jsx","components/AudioPlayer/Pause.jsx","assets/audio/itw-polo.mp3","assets/audio/itw-freins.mp3","assets/audio/itw-pedale.mp3","assets/audio/itw-pignon.mp3","assets/audio/itw-protec-disque.mp3","assets/audio/itw-protec-valve.mp3","assets/audio/itw-roue.mp3","components/AudioPlayer/AudioPlayer.jsx"],"names":["useAudioPlayer","src","useState","duration","setDuration","curTime","setCurTime","playing","setPlaying","clickedTime","setClickedTime","useEffect","audio","document","getElementById","setAudioData","currentTime","setAudioTime","setAudioEnd","addEventListener","play","pause","removeEventListener","load","Bar","onTimeUpdate","curPercentage","formatDuration","helperDate","addSeconds","Date","format","calcClickedTime","e","clickPositionInPage","pageX","bar","querySelector","barStart","getBoundingClientRect","left","window","scrollX","barWidth","offsetWidth","className","style","background","onMouseDown","updateTimeOnMove","eMove","handleTimeDrag","Play","handleClick","onClick","Pause","audioFiles","id","polo","freins","pedale","pignon","protecDisque","protecValve","roue","AudioPlayer","open","useContext","StateContext","audioSrc","audioPlaying","setAudioPlaying","setAudioSrc","close","useCallback","classNames","preload","find","file","title","time"],"mappings":"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","file":"static/js/4.3292b1a2.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction useAudioPlayer(src) {\n  const [duration, setDuration] = useState();\n  const [curTime, setCurTime] = useState();\n  const [playing, setPlaying] = useState(false);\n  const [clickedTime, setClickedTime] = useState();\n\n  useEffect(() => {\n    const audio = document.getElementById(\"audio\");\n    // const source = document.querySelector(\"#audio source\")\n\n    // state setters wrappers\n    const setAudioData = () => {\n      setDuration(audio.duration);\n      setCurTime(audio.currentTime);\n    }\n\n    const setAudioTime = () => setCurTime(audio.currentTime);\n\n    const setAudioEnd = () => {\n      setCurTime(null);\n      setPlaying(false);\n    }\n\n    // DOM listeners: update React state on DOM events\n    audio.addEventListener(\"loadeddata\", setAudioData);\n\n    audio.addEventListener(\"timeupdate\", setAudioTime);\n\n    audio.addEventListener(\"ended\", setAudioEnd)\n\n    // React state listeners: update DOM on React state changes\n    playing ? audio.play() : audio.pause();\n\n    if (clickedTime && clickedTime !== curTime) {\n      audio.currentTime = clickedTime;\n      setClickedTime(null);\n    } \n\n    // effect cleanup\n    return () => {\n      audio.removeEventListener(\"loadeddata\", setAudioData);\n      audio.removeEventListener(\"timeupdate\", setAudioTime);\n      audio.removeEventListener(\"ended\", setAudioEnd);\n    }\n  }, [playing, clickedTime, curTime]);\n\n  useEffect(() => {\n    if (playing) {\n      const audio = document.getElementById(\"audio\");\n      audio.load();\n      audio.play();\n      setCurTime(null);\n    }\n  }, [src, playing])\n\n  return {\n    curTime,\n    duration,\n    playing,\n    setPlaying,\n    setClickedTime,\n    setDuration\n  }\n}\n\nexport default useAudioPlayer;","import React from 'react';\nimport { format, addSeconds } from 'date-fns';\n\nconst Bar = ({ duration, curTime, onTimeUpdate }) => {\n\n  const curPercentage = (curTime / duration) * 100;\n\n  function formatDuration(duration) {\n    if (duration) {\n      const helperDate = addSeconds(new Date(0), duration);\n      return format(helperDate, 'mm:ss')\n    }\n  }\n\n  function calcClickedTime(e) {\n    const clickPositionInPage = e.pageX;\n    const bar = document.querySelector(\".audio-player__bar__progress\");\n    const barStart = bar.getBoundingClientRect().left + window.scrollX;\n    const barWidth = bar.offsetWidth;\n    const clickPositionInBar = clickPositionInPage - barStart;\n    const timePerPixel = duration / barWidth;\n    return timePerPixel * clickPositionInBar;\n  }\n\n  function handleTimeDrag(e) {\n    onTimeUpdate(calcClickedTime(e));\n\n    const updateTimeOnMove = eMove => {\n      onTimeUpdate(calcClickedTime(eMove));\n    };\n\n    document.addEventListener(\"mousemove\", updateTimeOnMove);\n\n    document.addEventListener(\"mouseup\", () => {\n      document.removeEventListener(\"mousemove\", updateTimeOnMove);\n    });\n  }\n\n  return (\n    <div className=\"audio-player__bar\">\n      <span className=\"audio-player__bar__time\">{formatDuration(curTime)}</span>\n      <div\n        className=\"audio-player__bar__progress\"\n        style={{\n          background: `linear-gradient(to right, #8ca89b ${curPercentage}%, white 0)`\n        }}\n        onMouseDown={e => handleTimeDrag(e)}\n      >\n        <span\n          className=\"audio-player__bar__progress__knob\"\n          style={{ left: `${curPercentage - 2}%` }}\n        />\n      </div>\n      <span className=\"audio-player__bar__time\">{formatDuration(duration)}</span>\n    </div>\n  );\n};\n\nexport default Bar;\n","import React from 'react';\nimport { ReactComponent as PlayIcon } from '../../assets/play.svg';\n\nconst Play = ({ handleClick }) => {\n  return (\n    <button className=\"audio-player__button\" onClick={() => handleClick()}>\n      <PlayIcon />\n    </button>\n  );\n};\n\nexport default Play;","import React from 'react';\nimport { ReactComponent as PauseIcon } from '../../assets/pause.svg'\n\nconst Pause = ({ handleClick }) => {\n  return (\n    <button className=\"audio-player__button\" onClick={() => handleClick()}>\n      <PauseIcon />\n    </button>\n  );\n};\n\nexport default Pause;","export default __webpack_public_path__ + \"static/media/itw-polo.d7858915.mp3\";","export default __webpack_public_path__ + \"static/media/itw-freins.f6ffe453.mp3\";","export default __webpack_public_path__ + \"static/media/itw-pedale.ead08cb5.mp3\";","export default __webpack_public_path__ + \"static/media/itw-pignon.3582b749.mp3\";","export default __webpack_public_path__ + \"static/media/itw-protec-disque.a247f916.mp3\";","export default __webpack_public_path__ + \"static/media/itw-protec-valve.aca7885d.mp3\";","export default __webpack_public_path__ + \"static/media/itw-roue.90dc13cf.mp3\";","import React, { useEffect, useCallback, useContext } from 'react';\nimport classNames from 'classnames';\nimport { StateContext } from '../../App';\nimport useAudioPlayer from '../../hooks/useAudioPlayer';\nimport Bar from './Bar';\nimport Play from './Play';\nimport Pause from './Pause';\nimport polo from '../../assets/audio/itw-polo.mp3';\nimport freins from '../../assets/audio/itw-freins.mp3';\nimport pedale from '../../assets/audio/itw-pedale.mp3';\nimport pignon from '../../assets/audio/itw-pignon.mp3';\nimport protecDisque from '../../assets/audio/itw-protec-disque.mp3';\nimport protecValve from '../../assets/audio/itw-protec-valve.mp3';\nimport roue from '../../assets/audio/itw-roue.mp3';\nimport { ReactComponent as CloseIcon } from '../../assets/close.svg';\n\nconst audioFiles = [\n  {\n    id: \"polo\",\n    src: polo,\n  },\n  {\n    id: \"freins\",\n    src: freins\n  },\n  {\n    id: \"pedale\",\n    src: pedale\n  },\n  {\n    id: \"pignon\",\n    src: pignon\n  },\n  {\n    id: \"protecDisque\",\n    src: protecDisque\n  },\n  {\n    id: \"protecValve\",\n    src: protecValve\n  },\n  {\n    id: \"roue\",\n    src: roue\n  },\n];\n\nconst AudioPlayer = ({ open }) => {\n  const { audioSrc, audioPlaying, setAudioPlaying, setAudioSrc } = useContext(StateContext);\n  const { curTime, duration, playing, setPlaying, setClickedTime } = useAudioPlayer(audioSrc);\n\n  useEffect(() => {\n    setPlaying(audioPlaying);\n  }, [setPlaying, audioPlaying]);\n  \n  const close = useCallback(() => {\n    setAudioSrc(null);\n  }, [setAudioSrc]);\n\n  return (\n    <div className={classNames(\"audio-player\", {\"audio-player--is-open\": open})}>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"audio-player__content\">\n              {audioSrc &&\n                <div className=\"audio-player__content-inner\">\n                  <audio id=\"audio\" preload=\"none\">\n                    <source src={audioFiles.find(file => file.id === audioSrc.id).src} />\n                    Your browser does not support the <code>audio</code> element.\n                  </audio>\n                  {playing ? \n                    <Pause handleClick={() => {\n                      setPlaying(false);\n                      setAudioPlaying(false);\n                    }} /> :\n                    <Play handleClick={() => {\n                      setPlaying(true);\n                      setAudioPlaying(true);\n                    }} />\n                  }\n                  <p>{audioSrc.title}</p>\n                  <Bar curTime={curTime} duration={duration} onTimeUpdate={(time) => setClickedTime(time)}/>\n                </div>\n              }\n              <button className=\"audio-player__close\" onClick={close}>\n                <CloseIcon />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;"],"sourceRoot":""}